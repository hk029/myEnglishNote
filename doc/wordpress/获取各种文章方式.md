# 获取各种文章

## 各种方法的调用关系

基本上获取文章的方式有`query_posts()` 、 `get_posts()`  或者直接使用`WP_Query()`查询，但是其实本质上，他们都是通过WP_Query()查询的，但是要注意，query_posts()是替代了主查询，通常它非常耗时，不到万不得已一般不采用这种方式。

![your text](http://o7bk1ffzo.bkt.clouddn.com/1482205241041)

## get_posts()
强烈建议主要使用这个，速度快很多

一般用法如下，它也可以接收一个数组，可选参数也很多：
```php
  $recentPosts = get_posts(array(
                'numberposts' => 3,
                'category' => $mx_cat->cat_ID, 
                'orderby' => 'date',
                'order' => 'ASC',
                'include' => array(),
                'exclude' => array(), 
                'meta_key' => '',
                'meta_value' =>'', 
                'post_type' => 'post',
                'suppress_filters' => true
            ));
```

它的用法是先`setup_postdata`，用完`wp_reset_postdata`

```php
  if ( $recentPosts ) {
    foreach ( $recentPosts as $post ) :
        setup_postdata( $post ); ?>
	    get_template_part( 'tpl/content', get_post_format() );
   		endforeach; 
   	   wp_reset_postdata();
}
```



## WP Query

这个可以查询的范围就非常之广了，你可以构造很复杂的查询目标，具体参数参考官方文档（最底下给出了链接）

```php
$recentPosts = new WP_Query($args));
```

```php
if ( $the_query->have_posts() ) {
  while ($recentPosts->have_posts()) : $recentPosts->the_post();
    get_template_part( 'tpl/content', get_post_format() );
   endwhile;
}
wp_reset_postdata();
```

## 参考

[get_posts官方文档](https://developer.wordpress.org/reference/functions/get_posts/)



[WP_Query](https://developer.wordpress.org/reference/classes/wp_query/)